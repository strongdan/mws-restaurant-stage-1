{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/sw.js"],"names":[],"mappings":"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","file":"sw.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const appName = \"restaurant-reviews\"\nconst staticCacheName = appName + \"-v1.0\";\nconst contentImgsCache = appName + \"-images\";\n\nvar allCaches = [\n  staticCacheName,\n  contentImgsCache\n];\n\n/** At Service Worker Install time, cache all static assets */\nself.addEventListener('install', function(event) {\n  event.waitUntil(\n    caches.open(staticCacheName).then(function(cache) {\n      return cache.addAll([\n        '/', // this caches index.html\n        '/restaurant.html',\n        '/css/styles.css',\n        '/css/medium.css',\n        '/js/main.js',\n        '/js/restaurant_info.js',\n        'data/restaurants.json'\n        // add other static assets here like logos, svg icons or any\n        // other asset needed for your app UI \n        // (Don't add restaurant images, as they are not part of your\n        // application's UI)\n      ]);\n    })\n  );\n});\n\n/** At Service Worker Activation, Delete previous caches, if any */\nself.addEventListener('activate', function(event) {\n  event.waitUntil(\n    caches.keys().then(function(cacheNames) {\n      return Promise.all(\n        cacheNames.filter(function(cacheName) {\n          return cacheName.startsWith(appName) &&\n                 !allCaches.includes(cacheName);\n        }).map(function(cacheName) {\n          return caches.delete(cacheName);\n        })\n      );\n    })\n  );\n});\n\n/** Hijack fetch requests and respond accordingly */\nself.addEventListener('fetch', function(event) {\n  const requestUrl = new URL(event.request.url);\n\n  // only highjack request made to our app (not mapbox maps or leaflet, for example)\n  if (requestUrl.origin === location.origin) {\n\n    // Since requests made to restaurant.html have search params (like ?id=1), the url can't be used as the\n    // key to access the cache, so just respondWith restaurant.html if pathname startsWith '/restaurant.html'\n    if (requestUrl.pathname.startsWith('/restaurant.html')) {\n      event.respondWith(caches.match('/restaurant.html'));\n      return; // Done handling request, so exit early.\n    }\n\n    // If the request pathname starts with /img, then we need to handle images.\n    if (requestUrl.pathname.startsWith('/img')) {\n      event.respondWith(serveImage(event.request));\n      return; // Done handling request, so exit early.\n    }\n  }\n\n  // Default behavior: respond with cached elements, if any, falling back to network.\n  event.respondWith(\n    caches.match(event.request).then(function(response) {\n      return response || fetch(event.request);\n    })\n  );\n});\n\nfunction serveImage(request) {\n  let imageStorageUrl = request.url;\n\n  // Make a new URL with a stripped suffix and extension from the request url\n  // i.e. /img/1-medium.jpg  will become  /img/1\n  // we'll use this as the KEY for storing image into cache\n  imageStorageUrl = imageStorageUrl.replace(/-small\\.\\w{3}|-medium\\.\\w{3}|-large\\.\\w{3}/i, '');\n\n  return caches.open(contentImgsCache).then(function(cache) {\n    return cache.match(imageStorageUrl).then(function(response) {\n      // if image is in cache, return it, else fetch from network, cache a clone, then return network response\n      return response || fetch(request).then(function(networkResponse) {\n        cache.put(imageStorageUrl, networkResponse.clone());\n        return networkResponse;\n      });\n    });\n  });\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQU0sT0FBTyxHQUFHLG9CQUFoQjtBQUNBLElBQU0sZUFBZSxHQUFHLE9BQU8sR0FBRyxPQUFsQztBQUNBLElBQU0sZ0JBQWdCLEdBQUcsT0FBTyxHQUFHLFNBQW5DO0FBRUEsSUFBSSxTQUFTLEdBQUcsQ0FDZCxlQURjLEVBRWQsZ0JBRmMsQ0FBaEI7QUFLQTs7QUFDQSxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsU0FBdEIsRUFBaUMsVUFBUyxLQUFULEVBQWdCO0FBQy9DLEVBQUEsS0FBSyxDQUFDLFNBQU4sQ0FDRSxNQUFNLENBQUMsSUFBUCxDQUFZLGVBQVosRUFBNkIsSUFBN0IsQ0FBa0MsVUFBUyxLQUFULEVBQWdCO0FBQ2hELFdBQU8sS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUNsQixHQURrQixFQUNiO0FBQ0wsc0JBRmtCLEVBR2xCLGlCQUhrQixFQUlsQixpQkFKa0IsRUFLbEIsYUFMa0IsRUFNbEIsd0JBTmtCLEVBT2xCLHVCQVBrQixDQVFsQjtBQUNBO0FBQ0E7QUFDQTtBQVhrQixLQUFiLENBQVA7QUFhRCxHQWRELENBREY7QUFpQkQsQ0FsQkQ7QUFvQkE7O0FBQ0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLFVBQXRCLEVBQWtDLFVBQVMsS0FBVCxFQUFnQjtBQUNoRCxFQUFBLEtBQUssQ0FBQyxTQUFOLENBQ0UsTUFBTSxDQUFDLElBQVAsR0FBYyxJQUFkLENBQW1CLFVBQVMsVUFBVCxFQUFxQjtBQUN0QyxXQUFPLE9BQU8sQ0FBQyxHQUFSLENBQ0wsVUFBVSxDQUFDLE1BQVgsQ0FBa0IsVUFBUyxTQUFULEVBQW9CO0FBQ3BDLGFBQU8sU0FBUyxDQUFDLFVBQVYsQ0FBcUIsT0FBckIsS0FDQSxDQUFDLFNBQVMsQ0FBQyxRQUFWLENBQW1CLFNBQW5CLENBRFI7QUFFRCxLQUhELEVBR0csR0FISCxDQUdPLFVBQVMsU0FBVCxFQUFvQjtBQUN6QixhQUFPLE1BQU0sQ0FBQyxNQUFQLENBQWMsU0FBZCxDQUFQO0FBQ0QsS0FMRCxDQURLLENBQVA7QUFRRCxHQVRELENBREY7QUFZRCxDQWJEO0FBZUE7O0FBQ0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFVBQVMsS0FBVCxFQUFnQjtBQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLEdBQUosQ0FBUSxLQUFLLENBQUMsT0FBTixDQUFjLEdBQXRCLENBQW5CLENBRDZDLENBRzdDOztBQUNBLE1BQUksVUFBVSxDQUFDLE1BQVgsS0FBc0IsUUFBUSxDQUFDLE1BQW5DLEVBQTJDO0FBRXpDO0FBQ0E7QUFDQSxRQUFJLFVBQVUsQ0FBQyxRQUFYLENBQW9CLFVBQXBCLENBQStCLGtCQUEvQixDQUFKLEVBQXdEO0FBQ3RELE1BQUEsS0FBSyxDQUFDLFdBQU4sQ0FBa0IsTUFBTSxDQUFDLEtBQVAsQ0FBYSxrQkFBYixDQUFsQjtBQUNBLGFBRnNELENBRTlDO0FBQ1QsS0FQd0MsQ0FTekM7OztBQUNBLFFBQUksVUFBVSxDQUFDLFFBQVgsQ0FBb0IsVUFBcEIsQ0FBK0IsTUFBL0IsQ0FBSixFQUE0QztBQUMxQyxNQUFBLEtBQUssQ0FBQyxXQUFOLENBQWtCLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBUCxDQUE1QjtBQUNBLGFBRjBDLENBRWxDO0FBQ1Q7QUFDRixHQWxCNEMsQ0FvQjdDOzs7QUFDQSxFQUFBLEtBQUssQ0FBQyxXQUFOLENBQ0UsTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFLLENBQUMsT0FBbkIsRUFBNEIsSUFBNUIsQ0FBaUMsVUFBUyxRQUFULEVBQW1CO0FBQ2xELFdBQU8sUUFBUSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBUCxDQUF4QjtBQUNELEdBRkQsQ0FERjtBQUtELENBMUJEOztBQTRCQSxTQUFTLFVBQVQsQ0FBb0IsT0FBcEIsRUFBNkI7QUFDM0IsTUFBSSxlQUFlLEdBQUcsT0FBTyxDQUFDLEdBQTlCLENBRDJCLENBRzNCO0FBQ0E7QUFDQTs7QUFDQSxFQUFBLGVBQWUsR0FBRyxlQUFlLENBQUMsT0FBaEIsQ0FBd0IsNkNBQXhCLEVBQXVFLEVBQXZFLENBQWxCO0FBRUEsU0FBTyxNQUFNLENBQUMsSUFBUCxDQUFZLGdCQUFaLEVBQThCLElBQTlCLENBQW1DLFVBQVMsS0FBVCxFQUFnQjtBQUN4RCxXQUFPLEtBQUssQ0FBQyxLQUFOLENBQVksZUFBWixFQUE2QixJQUE3QixDQUFrQyxVQUFTLFFBQVQsRUFBbUI7QUFDMUQ7QUFDQSxhQUFPLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBRCxDQUFMLENBQWUsSUFBZixDQUFvQixVQUFTLGVBQVQsRUFBMEI7QUFDL0QsUUFBQSxLQUFLLENBQUMsR0FBTixDQUFVLGVBQVYsRUFBMkIsZUFBZSxDQUFDLEtBQWhCLEVBQTNCO0FBQ0EsZUFBTyxlQUFQO0FBQ0QsT0FIa0IsQ0FBbkI7QUFJRCxLQU5NLENBQVA7QUFPRCxHQVJNLENBQVA7QUFTRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IGFwcE5hbWUgPSBcInJlc3RhdXJhbnQtcmV2aWV3c1wiXG5jb25zdCBzdGF0aWNDYWNoZU5hbWUgPSBhcHBOYW1lICsgXCItdjEuMFwiO1xuY29uc3QgY29udGVudEltZ3NDYWNoZSA9IGFwcE5hbWUgKyBcIi1pbWFnZXNcIjtcblxudmFyIGFsbENhY2hlcyA9IFtcbiAgc3RhdGljQ2FjaGVOYW1lLFxuICBjb250ZW50SW1nc0NhY2hlXG5dO1xuXG4vKiogQXQgU2VydmljZSBXb3JrZXIgSW5zdGFsbCB0aW1lLCBjYWNoZSBhbGwgc3RhdGljIGFzc2V0cyAqL1xuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgZXZlbnQud2FpdFVudGlsKFxuICAgIGNhY2hlcy5vcGVuKHN0YXRpY0NhY2hlTmFtZSkudGhlbihmdW5jdGlvbihjYWNoZSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmFkZEFsbChbXG4gICAgICAgICcvJywgLy8gdGhpcyBjYWNoZXMgaW5kZXguaHRtbFxuICAgICAgICAnL3Jlc3RhdXJhbnQuaHRtbCcsXG4gICAgICAgICcvY3NzL3N0eWxlcy5jc3MnLFxuICAgICAgICAnL2Nzcy9tZWRpdW0uY3NzJyxcbiAgICAgICAgJy9qcy9tYWluLmpzJyxcbiAgICAgICAgJy9qcy9yZXN0YXVyYW50X2luZm8uanMnLFxuICAgICAgICAnZGF0YS9yZXN0YXVyYW50cy5qc29uJ1xuICAgICAgICAvLyBhZGQgb3RoZXIgc3RhdGljIGFzc2V0cyBoZXJlIGxpa2UgbG9nb3MsIHN2ZyBpY29ucyBvciBhbnlcbiAgICAgICAgLy8gb3RoZXIgYXNzZXQgbmVlZGVkIGZvciB5b3VyIGFwcCBVSSBcbiAgICAgICAgLy8gKERvbid0IGFkZCByZXN0YXVyYW50IGltYWdlcywgYXMgdGhleSBhcmUgbm90IHBhcnQgb2YgeW91clxuICAgICAgICAvLyBhcHBsaWNhdGlvbidzIFVJKVxuICAgICAgXSk7XG4gICAgfSlcbiAgKTtcbn0pO1xuXG4vKiogQXQgU2VydmljZSBXb3JrZXIgQWN0aXZhdGlvbiwgRGVsZXRlIHByZXZpb3VzIGNhY2hlcywgaWYgYW55ICovXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2FjdGl2YXRlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgZXZlbnQud2FpdFVudGlsKFxuICAgIGNhY2hlcy5rZXlzKCkudGhlbihmdW5jdGlvbihjYWNoZU5hbWVzKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgIGNhY2hlTmFtZXMuZmlsdGVyKGZ1bmN0aW9uKGNhY2hlTmFtZSkge1xuICAgICAgICAgIHJldHVybiBjYWNoZU5hbWUuc3RhcnRzV2l0aChhcHBOYW1lKSAmJlxuICAgICAgICAgICAgICAgICAhYWxsQ2FjaGVzLmluY2x1ZGVzKGNhY2hlTmFtZSk7XG4gICAgICAgIH0pLm1hcChmdW5jdGlvbihjYWNoZU5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZU5hbWUpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KVxuICApO1xufSk7XG5cbi8qKiBIaWphY2sgZmV0Y2ggcmVxdWVzdHMgYW5kIHJlc3BvbmQgYWNjb3JkaW5nbHkgKi9cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBmdW5jdGlvbihldmVudCkge1xuICBjb25zdCByZXF1ZXN0VXJsID0gbmV3IFVSTChldmVudC5yZXF1ZXN0LnVybCk7XG5cbiAgLy8gb25seSBoaWdoamFjayByZXF1ZXN0IG1hZGUgdG8gb3VyIGFwcCAobm90IG1hcGJveCBtYXBzIG9yIGxlYWZsZXQsIGZvciBleGFtcGxlKVxuICBpZiAocmVxdWVzdFVybC5vcmlnaW4gPT09IGxvY2F0aW9uLm9yaWdpbikge1xuXG4gICAgLy8gU2luY2UgcmVxdWVzdHMgbWFkZSB0byByZXN0YXVyYW50Lmh0bWwgaGF2ZSBzZWFyY2ggcGFyYW1zIChsaWtlID9pZD0xKSwgdGhlIHVybCBjYW4ndCBiZSB1c2VkIGFzIHRoZVxuICAgIC8vIGtleSB0byBhY2Nlc3MgdGhlIGNhY2hlLCBzbyBqdXN0IHJlc3BvbmRXaXRoIHJlc3RhdXJhbnQuaHRtbCBpZiBwYXRobmFtZSBzdGFydHNXaXRoICcvcmVzdGF1cmFudC5odG1sJ1xuICAgIGlmIChyZXF1ZXN0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9yZXN0YXVyYW50Lmh0bWwnKSkge1xuICAgICAgZXZlbnQucmVzcG9uZFdpdGgoY2FjaGVzLm1hdGNoKCcvcmVzdGF1cmFudC5odG1sJykpO1xuICAgICAgcmV0dXJuOyAvLyBEb25lIGhhbmRsaW5nIHJlcXVlc3QsIHNvIGV4aXQgZWFybHkuXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHJlcXVlc3QgcGF0aG5hbWUgc3RhcnRzIHdpdGggL2ltZywgdGhlbiB3ZSBuZWVkIHRvIGhhbmRsZSBpbWFnZXMuXG4gICAgaWYgKHJlcXVlc3RVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2ltZycpKSB7XG4gICAgICBldmVudC5yZXNwb25kV2l0aChzZXJ2ZUltYWdlKGV2ZW50LnJlcXVlc3QpKTtcbiAgICAgIHJldHVybjsgLy8gRG9uZSBoYW5kbGluZyByZXF1ZXN0LCBzbyBleGl0IGVhcmx5LlxuICAgIH1cbiAgfVxuXG4gIC8vIERlZmF1bHQgYmVoYXZpb3I6IHJlc3BvbmQgd2l0aCBjYWNoZWQgZWxlbWVudHMsIGlmIGFueSwgZmFsbGluZyBiYWNrIHRvIG5ldHdvcmsuXG4gIGV2ZW50LnJlc3BvbmRXaXRoKFxuICAgIGNhY2hlcy5tYXRjaChldmVudC5yZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2goZXZlbnQucmVxdWVzdCk7XG4gICAgfSlcbiAgKTtcbn0pO1xuXG5mdW5jdGlvbiBzZXJ2ZUltYWdlKHJlcXVlc3QpIHtcbiAgbGV0IGltYWdlU3RvcmFnZVVybCA9IHJlcXVlc3QudXJsO1xuXG4gIC8vIE1ha2UgYSBuZXcgVVJMIHdpdGggYSBzdHJpcHBlZCBzdWZmaXggYW5kIGV4dGVuc2lvbiBmcm9tIHRoZSByZXF1ZXN0IHVybFxuICAvLyBpLmUuIC9pbWcvMS1tZWRpdW0uanBnICB3aWxsIGJlY29tZSAgL2ltZy8xXG4gIC8vIHdlJ2xsIHVzZSB0aGlzIGFzIHRoZSBLRVkgZm9yIHN0b3JpbmcgaW1hZ2UgaW50byBjYWNoZVxuICBpbWFnZVN0b3JhZ2VVcmwgPSBpbWFnZVN0b3JhZ2VVcmwucmVwbGFjZSgvLXNtYWxsXFwuXFx3ezN9fC1tZWRpdW1cXC5cXHd7M318LWxhcmdlXFwuXFx3ezN9L2ksICcnKTtcblxuICByZXR1cm4gY2FjaGVzLm9wZW4oY29udGVudEltZ3NDYWNoZSkudGhlbihmdW5jdGlvbihjYWNoZSkge1xuICAgIHJldHVybiBjYWNoZS5tYXRjaChpbWFnZVN0b3JhZ2VVcmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIC8vIGlmIGltYWdlIGlzIGluIGNhY2hlLCByZXR1cm4gaXQsIGVsc2UgZmV0Y2ggZnJvbSBuZXR3b3JrLCBjYWNoZSBhIGNsb25lLCB0aGVuIHJldHVybiBuZXR3b3JrIHJlc3BvbnNlXG4gICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2gocmVxdWVzdCkudGhlbihmdW5jdGlvbihuZXR3b3JrUmVzcG9uc2UpIHtcbiAgICAgICAgY2FjaGUucHV0KGltYWdlU3RvcmFnZVVybCwgbmV0d29ya1Jlc3BvbnNlLmNsb25lKCkpO1xuICAgICAgICByZXR1cm4gbmV0d29ya1Jlc3BvbnNlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSJdfQ=="}